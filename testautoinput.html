<!DOCTYPE HTML>
<html>
   <head>
   <meta charset="utf-8">
   <title>超级玛丽</title>
       <script type="text/javascript">
         function fireKeyEvent(evtType, keyCode) {
         	  var el=document;
            var evtObj;
            if (document.createEvent) {
                if (window.KeyEvent) {//firefox 浏览器下模拟事件
                    evtObj = document.createEvent('KeyEvents');
                    evtObj.initKeyEvent(evtType, true, true, window, true, false, false, false, keyCode, 0);
                } else {//chrome 浏览器下模拟事件
                    evtObj = document.createEvent('UIEvents');
                    evtObj.initUIEvent(evtType, true, true, window, 1);

                    delete evtObj.keyCode;
                    if (typeof evtObj.keyCode === "undefined") {//为了模拟keycode
                        Object.defineProperty(evtObj, "keyCode", { value: keyCode });                       
                    } else {
                        evtObj.key = String.fromCharCode(keyCode);
                    }

                    if (typeof evtObj.ctrlKey === 'undefined') {//为了模拟ctrl键
                        Object.defineProperty(evtObj, "ctrlKey", { value: true });
                    } else {
                        evtObj.ctrlKey = true;
                    }
                }
                el.dispatchEvent(evtObj);

            } else if (document.createEventObject) {//IE 浏览器下模拟事件
                evtObj = document.createEventObject();
                evtObj.keyCode = keyCode
                el.fireEvent('on' + evtType, evtObj);
            }
        }
         
         function start(){
         	console.log("start")
         	document.onkeyup = function(ev){
									var ev = ev || window.event;
									console.log(ev.keyCode)
									return false;
								};
					document.onkeyup = function(ev){
									console.log("onkeyup")
								};
         		    fireKeyEvent("keydown", 68);
		            fireKeyEvent("keypress", 68);
		            fireKeyEvent("keyup", 68);
		        
		        		
         }
      </script>
   </head>

   <body>
   		<h1 id="time_text"></h1>
			<button type="button" onclick="start()">开始</button>
			<label>
   </body>
</html>